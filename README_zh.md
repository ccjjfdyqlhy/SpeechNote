# SpeechNote - 演讲稿智能提词器

## 项目概述

SpeechNote 是一个专为演讲者设计的智能提词器应用，通过 TTML（Timed Text Markup Language）格式的字幕文件，为演讲提供实时的文本引导。该应用集成了精美的 UI 界面、精准的时间控制和灵活的显示模式。

## note.py 功能说明

`note.py` 是项目的核心文件，实现了一个基于 PyWebView 的桌面应用，提供演讲实时显示和提词功能。

### 主要功能模块

#### 1. **TTML 文件解析**
- 支持打开和解析 TTML 格式的字幕文件
- 提取字幕中的时间码（begin/end）和文本内容
- 将字幕内容转换为内部的时间轴数据结构

#### 2. **演讲计时系统**
- **实时倒计时**：显示距离演讲结束的时间
- **时间警告**：当剩余时间少于 30 秒时，计时器变为红色警告
- **精确同步**：与 TTML 文件中的时间码精确同步
- **暂停机制**：支持暂停和恢复，自动累计暂停时长

#### 3. **交互式控制**
- **空格键操作**：
  - 初始状态：长按 3 秒准备
  - 倒计时状态：松开空格开始演讲
  - 演讲中：短按暂停，长按 3 秒重置
  - 暂停状态：短按继续，长按 3 秒重置

#### 4. **显示模式**

**常规模式**：
- 大字体当前行显示（42px 粗体）
- 进度条实时反映当前句子进度
- 下一句文本预览
- 底部状态提示
- 完整的时间倒计时显示

**极小模式（Compact Mode）**：
- 将窗口缩小至 230×120 像素
- 紧凑型界面布局
- 文本自动滚动（进度超过 50% 时）
- 时间以秒数显示（如 "45s"）
- 便于在屏幕角落长期显示

#### 5. **可视化反馈**
- **实时进度条**：显示当前句子的播放进度
- **暂停覆盖层**：暂停时显示"已暂停"提示
- **文本淡出效果**：暂停时文本透明度降低
- **状态提示栏**：实时更新应用状态信息

#### 6. **UI 设计特性**
- 现代化设计，支持白色主题
- 响应式布局，自动适应窗口大小
- 流畅的过渡动画和交互反馈
- 支持亮色/暗色模式定制（CSS 变量）

## 使用方法

### 安装依赖

```bash
pip install pywebview
```

### 运行应用

```bash
python note.py
```

### 操作流程

1. **启动应用**
   - 应用启动后显示"打开题词文件 (TTML)"按钮

2. **加载文件**
   - 点击按钮打开文件选择对话框
   - 选择一个 .ttml 格式的字幕文件
   - 文件加载完成后进入提词器界面

3. **开始演讲**
   - 按住空格键 3 秒，等待倒计时完成
   - 看到">>> 松开空格开始 <<<"提示后，松开空格键
   - 演讲正式开始，文本和计时器开始同步更新

4. **演讲过程中**
   - 短按空格键：暂停演讲（可随时恢复）
   - 长按空格键 3 秒：重置演讲（返回到初始状态）
   - 观察计时器和进度条，掌握演讲节奏

5. **切换显示模式**
   - 点击右下角的"切换极小模式"按钮（缩放图标）
   - 在常规模式和极小模式之间切换

### TTML 文件格式示例

```xml
<?xml version="1.0" encoding="UTF-8"?>
<tt xml:lang="zh-CN" xmlns="http://www.w3.org/ns/ttml">
  <body>
    <div>
      <p begin="00:00:00" end="00:00:03">大家好，欢迎来到今天的演讲</p>
      <p begin="00:00:03" end="00:00:08">今天我将为大家分享三个关键点</p>
      <p begin="00:00:08" end="00:00:12">首先，让我们从第一个要点开始</p>
    </div>
  </body>
</tt>
```

## 快捷键说明

| 操作 | 效果 |
|------|------|
| 长按空格 3 秒（初始状态） | 进入倒计时准备 |
| 松开空格（倒计时状态） | 开始演讲 |
| 短按空格（演讲中） | 暂停演讲 |
| 长按空格 3 秒（演讲中/暂停时） | 重置演讲 |
| 短按空格（暂停状态） | 恢复演讲 |

## 窗口尺寸

- **常规模式**：1000 × 600 像素
- **极小模式**：230 × 120 像素
- **最小尺寸限制**：230 × 120 像素